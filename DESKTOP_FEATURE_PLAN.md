# PixelPunk Desktop 桌面端功能规划文档

> **项目定位**: 基于 Tauri 2.0 的智能文件管理桌面应用，支持 AI 驱动的图片/文件管理、上传、分享和搜索功能
>
> **核心亮点**: AI 智能标签 + 向量搜索 + 完整文件管理系统
>
> **技术栈**: Tauri 2.8 + Vue 3.5 + TypeScript 5.8 + Pinia
>
> **数据互通**: 与 Web 端共用数据库和 API 接口（后端端口：9520）
>
> **支持平台**: Windows、macOS（主要）、Linux（次要）

---

## 📋 目录

- [核心功能模块](#核心功能模块)
- [AI 功能模块](#ai-功能模块)
- [桌面特有功能](#桌面特有功能)
- [界面布局设计](#界面布局设计)
- [技术实现方案](#技术实现方案)
- [开发阶段规划](#开发阶段规划)
- [与 Web 端的差异化](#与-web-端的差异化)

---

## 🎯 核心功能模块

### 1. 仪表盘（Dashboard）

**功能概览**：
- 数据统计看板
  - 文件总数量
  - 存储空间使用情况（已用/总量）
  - 今日上传文件数
  - 总浏览次数
  - 分享数量统计

- 存储空间可视化
  - 空间限额进度条
  - 带宽流量使用情况
  - 存储趋势图表（ECharts）

- 快速操作入口
  - 我的文件
  - 文件夹管理
  - 分享管理
  - 统计分析
  - API 管理
  - 个人信息
  - 安全设置
  - 数据库状态
  - 关于应用

- 最近活动列表
  - 文件上传记录
  - 文件分享动态
  - 系统消息通知
  - 实时活动监控

**API 接口**：
- `GET /api/v1/dashboard/stats` - 获取统计数据
- `GET /api/v1/files/list?limit=10&sort=created_at:desc` - 最近上传
- `GET /api/v1/stats/...` - 各类统计接口

---

### 2. 文件管理系统

#### 2.1 文件上传

**基础上传功能**：
- 拖拽上传（支持多文件）
- 点击选择上传
- 粘贴上传（剪贴板图片）
- 文件夹批量上传

**高级上传特性**：
- 秒传检测（基于 MD5 哈希，本地 spark-md5 计算）
- 大文件分片上传（断点续传）
- 上传队列管理
  - 并发控制（限制同时上传数量）
  - 暂停/恢复/取消
  - 上传优先级调整
- 上传进度实时显示
- 失败自动重试机制

**上传配置选项**：
- 目标文件夹选择
- 访问权限设置（public/private）
- 存储时长设置
- 是否启用图片优化
- 水印配置（支持预设）

**API 接口**：
- `POST /api/v1/files/upload` - 单文件上传
- `POST /api/v1/files/batch-upload` - 批量上传
- `POST /api/v1/files/check-duplicate` - 秒传检测
- `POST /api/v1/files/instant-upload` - 秒传上传

#### 2.2 文件列表与浏览

**列表视图**：
- 网格视图（Grid）- 带缩略图预览
- 列表视图（List）- 详细信息展示
- 时间线视图（Timeline）- 按日期分组

**排序与筛选**：
- 按名称/大小/时间/类型排序
- 按文件类型筛选（图片/视频/文档等）
- 按标签筛选
- 按分类筛选
- 按访问权限筛选

**批量操作**：
- 多选支持（Ctrl/Shift 选择）
- 批量删除
- 批量移动到文件夹
- 批量修改权限
- 批量下载
- 批量添加标签

**API 接口**：
- `GET /api/v1/files/list` - 获取文件列表
- `GET /api/v1/files/{id}` - 获取文件详情
- `DELETE /api/v1/files/{id}` - 删除文件
- `POST /api/v1/files/batch-delete` - 批量删除

#### 2.3 文件预览

**支持的预览类型**：
- 图片预览（PhotoSwipe）
  - 放大/缩小/旋转
  - 左右切换浏览
  - 幻灯片播放
  - 缩略图导航

- 视频预览
  - 原生视频播放器
  - 进度控制
  - 音量调节

- 其他文件类型
  - PDF 预览
  - 文本文件预览
  - Markdown 渲染预览

**预览面板信息**：
- 文件基本信息（名称、大小、格式、分辨率）
- AI 分析结果（标签、分类、描述）
- EXIF 信息（图片）
- 上传时间、访问次数
- 分享状态
- 存储位置

#### 2.4 文件编辑

**可编辑信息**：
- 文件名称
- 描述信息
- 标签添加/删除
- 分类修改
- 访问权限切换
- 推荐状态设置

**API 接口**：
- `PUT /api/v1/files/{id}` - 更新文件信息

#### 2.5 文件下载

**下载功能**：
- 单文件下载
- 批量打包下载（ZIP）
- 下载进度显示
- 下载质量选择（原图/压缩）
- 下载格式转换（JPG/PNG/WebP）

**API 接口**：
- `GET /api/v1/files/{id}/download` - 下载文件

---

### 3. 文件夹管理

**功能特性**：
- 创建/重命名/删除文件夹
- 文件夹嵌套（树形结构）
- 拖拽移动文件到文件夹
- 文件夹统计信息（文件数量、占用空间）
- 面包屑导航
- 文件夹排序（自定义顺序）

**API 接口**：
- `GET /api/v1/folders` - 获取文件夹列表
- `POST /api/v1/folders` - 创建文件夹
- `PUT /api/v1/folders/{id}` - 更新文件夹
- `DELETE /api/v1/folders/{id}` - 删除文件夹
- `POST /api/v1/files/move` - 移动文件

---

### 4. 分享管理

**分享功能**：
- 创建分享链接
  - 单文件分享
  - 批量文件分享
  - 文件夹分享

- 分享配置
  - 访问密码设置（可选）
  - 有效期限制
  - 访问次数限制
  - 允许下载/仅预览

- 分享列表管理
  - 查看所有分享
  - 分享统计（访问次数、访客信息）
  - 取消分享
  - 续期延长

**API 接口**：
- `GET /api/v1/shares` - 获取分享列表
- `POST /api/v1/shares` - 创建分享
- `GET /api/v1/shares/{id}` - 获取分享详情
- `DELETE /api/v1/shares/{id}` - 删除分享
- `PUT /api/v1/shares/{id}` - 更新分享配置

---

### 5. 标签管理

**功能特性**：
- 查看所有标签
- 创建自定义标签
- 标签颜色/图标设置
- 标签使用统计
- 标签批量操作
- 通过标签快速筛选文件

**API 接口**：
- `GET /api/v1/tags` - 获取标签列表
- `POST /api/v1/tags` - 创建标签
- `PUT /api/v1/tags/{id}` - 更新标签
- `DELETE /api/v1/tags/{id}` - 删除标签

---

### 6. 分类管理

**功能特性**：
- 查看所有分类
- 创建自定义分类
- 分类层级结构
- 分类图标设置
- 分类使用统计
- 通过分类快速筛选文件

**API 接口**：
- `GET /api/v1/categories` - 获取分类列表
- `POST /api/v1/categories` - 创建分类
- `PUT /api/v1/categories/{id}` - 更新分类
- `DELETE /api/v1/categories/{id}` - 删除分类

---

### 7. 消息中心

**消息类型**：
- 系统通知（版本更新、维护公告）
- 文件上传成功/失败通知
- 分享访问通知
- AI 处理完成通知
- 存储空间告警
- 安全提醒

**功能特性**：
- 未读消息数量提醒
- 消息分类显示
- 标记已读/未读
- 批量删除消息
- 消息详情查看

**API 接口**：
- `GET /api/v1/messages` - 获取消息列表
- `PUT /api/v1/messages/{id}/read` - 标记已读
- `DELETE /api/v1/messages/{id}` - 删除消息

---

### 8. 个人设置

**账号设置**：
- 头像上传/修改
- 昵称修改
- 邮箱绑定
- 密码修改
- 账号安全信息

**偏好设置**：
- 主题切换（深色/浅色/自动）
- 语言选择
- 默认上传配置
- 文件命名规则
- 水印预设管理

**API 管理**：
- API Key 生成
- API Key 列表
- API Key 删除
- API 使用统计

**API 接口**：
- `GET /api/v1/user/profile` - 获取用户信息
- `PUT /api/v1/user/profile` - 更新用户信息
- `POST /api/v1/user/change-password` - 修改密码
- `GET /api/v1/apikeys` - 获取 API Key 列表
- `POST /api/v1/apikeys` - 创建 API Key
- `DELETE /api/v1/apikeys/{id}` - 删除 API Key

---

### 9. 系统设置

**存储配置**：
- 存储方式选择（本地/OSS/S3/COS）
- 存储凭证配置
- 存储路径设置
- 存储测试连接

**上传配置**：
- 默认上传文件夹
- 默认访问权限
- 图片优化开关
- 水印默认配置
- 上传并发数量

**安全配置**：
- 登录超时设置
- 两步验证
- 操作日志查看

**API 接口**：
- `GET /api/v1/settings` - 获取系统设置
- `PUT /api/v1/settings` - 更新系统设置

---

## 🤖 AI 功能模块

### 1. AI 智能标签

**功能描述**：
- 上传时自动识别图片内容，生成相关标签
- 支持物体识别、场景识别、人物识别
- 多语言标签支持
- 标签置信度显示
- 手动编辑/确认 AI 标签

**处理流程**：
1. 文件上传完成后，触发 AI 标签任务
2. 后端调用 AI 服务（OpenAI Vision API）
3. 生成标签列表并保存到 `file_ai_info` 表
4. 前端实时更新标签显示

**API 接口**：
- `POST /api/v1/ai/tag` - 手动触发 AI 标签
- `GET /api/v1/files/{id}/ai-info` - 获取 AI 分析结果

---

### 2. AI 智能分类

**功能描述**：
- 根据图片内容自动归类
- 支持的分类：风景、人物、美食、动物、建筑、艺术等
- 分类准确率显示
- 支持自定义分类规则

**处理流程**：
1. AI 标签生成后，根据标签进行分类推断
2. 自动将文件归入对应分类
3. 用户可手动调整分类

---

### 3. AI 智能描述

**功能描述**：
- 自动生成图片的文字描述
- 支持多语言描述生成
- 描述详细程度可配置
- 支持手动编辑描述

**处理流程**：
1. 调用 AI 模型生成图片描述
2. 保存到 `file_ai_info` 表的 `ai_description` 字段
3. 在文件详情中展示

---

### 4. AI 向量搜索

**功能描述**：
- 以图搜图功能
- 语义化文本搜索（输入描述找图片）
- 相似图片推荐
- 搜索结果相似度排序

**技术实现**：
- 使用 Qdrant 向量数据库
- 图片上传后生成向量并存储
- 搜索时计算向量相似度

**API 接口**：
- `POST /api/v1/vector/search` - 向量搜索
- `POST /api/v1/vector/similar` - 相似图片查找
- `GET /api/v1/vector/status` - 向量处理状态

---

### 5. AI 内容安全审核

**功能描述**：
- 自动检测 NSFW（不适宜内容）
- 违规内容自动隐藏/标记
- 支持手动复审

**处理流程**：
1. 图片上传后进行内容审核
2. 检测结果保存到 `File` 表的 `nsfw` 字段
3. 不适宜内容自动设置为私有

---

### 6. AI 自动任务管理

**功能特性**：
- 批量 AI 处理任务
- 定时扫描未处理文件
- 处理进度实时显示
- 失败任务重试机制
- 任务优先级队列

**任务类型**：
- 批量标签生成
- 批量分类
- 批量向量化
- 批量内容审核

**API 接口**：
- `GET /api/v1/ai/jobs` - 获取任务列表
- `POST /api/v1/ai/jobs` - 创建批量任务
- `GET /api/v1/ai/jobs/{id}` - 获取任务状态

---

## 💻 桌面特有功能

### 1. 全局快捷键

**快捷键列表**：
- `Ctrl/Cmd + Shift + U` - 快速上传剪贴板图片
- `Ctrl/Cmd + Shift + S` - 截图并上传
- `Ctrl/Cmd + Shift + V` - 粘贴并上传
- `Ctrl/Cmd + Shift + H` - 显示/隐藏主窗口
- `Ctrl/Cmd + ,` - 打开设置

**技术实现**：
- 使用 Tauri 的 `@tauri-apps/plugin-global-shortcut`
- 注册全局快捷键监听
- 支持用户自定义快捷键

---

### 2. 系统托盘

**托盘菜单**：
- 显示主窗口
- 快速上传
- 上传历史
- 设置
- 关于
- 退出应用

**托盘状态指示**：
- 正在上传（动画效果）
- 上传成功/失败（图标变化）
- 未读消息数量

**技术实现**：
- 使用 Tauri 的系统托盘 API
- 点击托盘图标显示/隐藏窗口
- 右键显示上下文菜单

---

### 3. 拖拽悬浮球

**功能特性**：
- 桌面悬浮窗口
- 拖拽文件快速上传
- 实时上传进度显示
- 可自由移动位置
- 支持最小化到托盘

**状态显示**：
- 待机状态（半透明）
- 拖拽悬停状态（高亮）
- 上传中状态（进度环）
- 上传完成状态（成功动画）

**技术实现**：
- 使用 Tauri 窗口 API 创建悬浮窗
- 监听文件拖放事件
- 窗口置顶（always on top）

---

### 4. 截图上传

**功能特性**：
- 快捷键触发截图
- 区域选择截图
- 全屏截图
- 延时截图
- 截图后自动上传

**技术实现**：
- Windows: 调用系统截图 API
- macOS: 调用 `screencapture` 命令
- 截图保存到临时目录
- 自动上传并复制链接

---

### 5. 剪贴板监听

**功能特性**：
- 监听剪贴板图片
- 自动提示上传
- 一键上传剪贴板内容
- 上传后自动复制链接

**技术实现**：
- 使用 Tauri 剪贴板 API
- 定时检测剪贴板变化
- 支持开关此功能

---

### 6. 本地历史缓存

**功能特性**：
- 缓存最近上传的文件信息
- 离线查看上传历史
- 快速复制历史文件链接
- 缓存清理管理

**存储方式**：
- 使用 IndexedDB 存储
- 或使用 Tauri 的本地存储 API
- 定期清理过期缓存

---

### 7. 桌面通知

**通知场景**：
- 文件上传成功
- 文件上传失败
- 分享被访问
- AI 处理完成
- 存储空间不足
- 版本更新提醒

**技术实现**：
- 使用 `@tauri-apps/plugin-notification`
- 支持通知点击跳转
- 通知历史记录

---

### 8. 自动更新

**功能特性**：
- 检查新版本
- 下载进度显示
- 自动安装更新
- 更新日志展示
- 版本回滚（可选）

**技术实现**：
- 使用 `@tauri-apps/plugin-updater`
- 配置更新服务器（后端已有）
- 差异化更新（节省流量）

---

### 9. 窗口状态记忆

**功能特性**：
- 记住窗口大小
- 记住窗口位置
- 记住最大化状态
- 下次启动恢复

**技术实现**：
- 使用 Tauri 模板的 `useWindowState`
- 存储到本地配置文件

---

### 10. 单实例运行

**功能特性**：
- 防止多开
- 已启动时激活现有窗口
- 传递启动参数

**技术实现**：
- 使用 Tauri 的单实例锁
- 已在模板中实现

---

## 🎨 界面布局设计

### 主窗口布局

```
┌────────────────────────────────────────────────────────────┐
│  [Logo] PixelPunk Desktop                    [-][□][×]     │ ← 标题栏
├────────────┬───────────────────────────────────────────────┤
│            │                                               │
│  侧边导航   │              主内容区域                       │
│  ========  │                                               │
│            │                                               │
│  🏠 仪表盘  │                                               │
│  📁 文件管理 │                                               │
│  📤 上传     │                                               │
│  📊 统计     │                                               │
│  🔍 搜索     │                                               │
│  🏷️ 标签    │                                               │
│  📂 分类     │                                               │
│  🔗 分享     │                                               │
│  💬 消息     │                                               │
│  🤖 AI 任务 │                                               │
│  ⚙️ 设置    │                                               │
│            │                                               │
└────────────┴───────────────────────────────────────────────┘
```

### 悬浮球界面

```
       ┌─────────┐
       │    ↑    │
       │   📁   │  ← 待机状态
       │  Drop  │
       └─────────┘

       ┌─────────┐
       │  ⭕75%  │  ← 上传中
       └─────────┘
```

---

## 🛠️ 技术实现方案

### 架构设计

**整体架构**：
```
┌─────────────────────────────────────────┐
│         桌面端 UI (Vue 3 + Tauri)        │
├─────────────────────────────────────────┤
│         状态管理 (Pinia)                 │
├─────────────────────────────────────────┤
│         API 层 (Axios)                   │
├─────────────────────────────────────────┤
│         后端 API (Go + Gin) :9520        │
├─────────────────────────────────────────┤
│  MySQL + Redis + Qdrant + File Storage  │
└─────────────────────────────────────────┘
```

### 技术选型

**前端框架**：
- **Vue 3.5** - 响应式 UI 框架
- **TypeScript 5.8** - 类型安全
- **Vite 7.1** - 构建工具
- **Pinia** - 状态管理
- **Vue Router** - 路由管理

**桌面框架**：
- **Tauri 2.8** - 桌面应用框架
- **Rust** - Tauri 后端

**UI 组件库**（待选择）：
- **Element Plus** - 完善的 Vue 3 组件库
- **Naive UI** - 轻量级组件库
- **Ant Design Vue** - 企业级组件库
- **自定义组件** - 赛博朋克风格

**工具库**：
- **Axios** - HTTP 请求
- **PhotoSwipe** - 图片预览（复用 Web 端）
- **spark-md5** - MD5 计算（秒传）
- **date-fns** - 日期处理
- **ECharts** - 数据可视化

### 代码复用策略

**可直接复用的代码**（从 Web 端）：
- API 接口定义（`src/api/*`）
- 类型定义（`src/types/*`）
- 工具函数（`src/utils/*`）
- Store 定义（`src/store/*`）
- 部分组件（`src/components/*`）

**需要适配的部分**：
- 布局组件（适配桌面窗口）
- 路由配置（精简路由）
- 特殊交互（拖拽、快捷键等）

### 数据存储方案

**本地存储**：
- 用户配置 - Tauri Store API
- 上传历史缓存 - IndexedDB
- 快捷键配置 - 本地 JSON 文件

**远程数据**：
- 所有业务数据 - 通过 API 从后端获取
- 与 Web 端完全同步

### 性能优化

**加载优化**：
- 路由懒加载
- 组件按需加载
- 图片懒加载
- 虚拟滚动（长列表）

**渲染优化**：
- 缩略图使用 WebP 格式
- 图片预加载
- 防抖/节流处理

**打包优化**：
- 代码分割
- Tree Shaking
- 资源压缩
- 二进制文件压缩

---

## 📅 开发阶段规划

### Phase 1: 基础框架搭建（2 周）

**目标**: 建立桌面端基础框架，实现基本的 UI 和核心功能

**任务清单**：
- [x] Tauri 项目初始化（已完成）
- [ ] UI 组件库选型和配置
- [ ] 主窗口布局开发
- [ ] 侧边导航栏开发
- [ ] 路由系统配置
- [ ] Pinia Store 配置
- [ ] API 接口层封装
- [ ] 用户认证系统（登录/注册）
- [ ] 基础主题系统（深色/浅色）

**交付物**：
- 可运行的桌面应用框架
- 完整的路由和导航
- 用户登录功能

---

### Phase 2: 文件管理核心功能（3 周）

**目标**: 实现完整的文件上传、管理、预览、下载功能

**任务清单**：

**Week 1: 文件上传**
- [ ] 文件选择上传
- [ ] 拖拽上传
- [ ] 上传进度显示
- [ ] 秒传检测（MD5）
- [ ] 上传队列管理
- [ ] 上传配置（权限、文件夹等）

**Week 2: 文件列表与管理**
- [ ] 文件列表展示（网格/列表视图）
- [ ] 文件排序和筛选
- [ ] 文件详情面板
- [ ] 文件编辑（重命名、描述等）
- [ ] 批量操作（删除、移动）
- [ ] 文件夹管理

**Week 3: 文件预览与下载**
- [ ] 图片预览（PhotoSwipe）
- [ ] 视频预览
- [ ] 文件信息展示
- [ ] 文件下载功能
- [ ] 批量下载（ZIP）

**交付物**：
- 完整的文件上传功能
- 完整的文件管理功能
- 完整的文件预览功能

---

### Phase 3: AI 功能集成（2 周）

**目标**: 集成 AI 智能标签、分类、搜索等功能

**任务清单**：

**Week 1: AI 基础功能**
- [ ] AI 标签显示
- [ ] AI 分类显示
- [ ] AI 描述显示
- [ ] 手动触发 AI 处理
- [ ] AI 处理进度显示

**Week 2: AI 高级功能**
- [ ] 向量搜索（以图搜图）
- [ ] 语义搜索
- [ ] 相似图片推荐
- [ ] AI 自动任务管理
- [ ] 批量 AI 处理

**交付物**：
- 完整的 AI 功能
- 向量搜索功能
- AI 任务管理界面

---

### Phase 4: 桌面特有功能（2 周）

**目标**: 实现桌面端特有的功能和交互

**任务清单**：

**Week 1: 系统集成**
- [ ] 全局快捷键配置
- [ ] 系统托盘功能
- [ ] 桌面通知
- [ ] 剪贴板监听
- [ ] 窗口状态记忆

**Week 2: 高级功能**
- [ ] 拖拽悬浮球
- [ ] 截图上传功能
- [ ] 本地历史缓存
- [ ] 自动更新功能

**交付物**：
- 完整的桌面特性
- 悬浮球功能
- 自动更新系统

---

### Phase 5: 扩展功能开发（2 周）

**目标**: 实现分享、标签、分类、统计等扩展功能

**任务清单**：

**Week 1: 分享与管理**
- [ ] 分享创建功能
- [ ] 分享列表管理
- [ ] 分享统计
- [ ] 标签管理界面
- [ ] 分类管理界面

**Week 2: 统计与设置**
- [ ] 仪表盘数据展示
- [ ] 统计图表（ECharts）
- [ ] 个人设置界面
- [ ] 系统设置界面
- [ ] API Key 管理

**交付物**：
- 完整的分享系统
- 标签和分类管理
- 统计和设置功能

---

### Phase 6: 测试与优化（2 周）

**目标**: 全面测试、修复 Bug、性能优化、文档完善

**任务清单**：

**Week 1: 测试与修复**
- [ ] 功能测试（所有功能）
- [ ] 兼容性测试（Windows/macOS）
- [ ] 性能测试
- [ ] Bug 修复
- [ ] UI/UX 优化

**Week 2: 优化与发布**
- [ ] 性能优化
- [ ] 打包体积优化
- [ ] 用户文档编写
- [ ] 开发文档完善
- [ ] 发布准备

**交付物**：
- 稳定的正式版本
- 完整的文档
- 安装包（Windows/macOS）

---

**总计开发周期**: 约 **13 周（3 个月）**

---

## 🆚 与 Web 端的差异化

### 功能差异

| 功能 | Web 端 | 桌面端 |
|------|--------|--------|
| 文件上传 | ✅ 完整支持 | ✅ 完整支持 + 拖拽悬浮球 + 剪贴板监听 + 截图上传 |
| 文件管理 | ✅ 完整支持 | ✅ 完整支持 + 本地缓存 |
| AI 功能 | ✅ 完整支持 | ✅ 完整支持 |
| 全局快捷键 | ❌ 不支持 | ✅ 支持 |
| 系统托盘 | ❌ 不支持 | ✅ 支持 |
| 桌面通知 | ⚠️ 浏览器通知 | ✅ 原生通知 |
| 离线使用 | ❌ 不支持 | ⚠️ 部分支持（缓存历史） |
| 自动更新 | ❌ 不需要 | ✅ 支持 |
| 管理员功能 | ✅ 完整支持 | ❌ 不支持（专注个人用户） |

### 用户体验差异

**Web 端优势**：
- 无需安装，打开即用
- 跨平台访问（任何浏览器）
- 适合临时使用
- 管理员功能完善

**桌面端优势**：
- 原生性能更好
- 系统集成深度更高
- 快捷操作更便捷
- 可离线查看历史
- 专注于个人文件管理

### 目标用户

**Web 端**: 所有用户、管理员、临时访客

**桌面端**: 重度用户、开发者、设计师、频繁上传图片的用户

---

## 📦 技术债务与待解决问题

### 已知问题

1. **Tauri 插件版本问题**
   - 当前启动时报错：`Failed to parse version '2' for crate 'tauri-plugin-*'`
   - 需要检查 `src-tauri/Cargo.toml` 中的插件版本配置

2. **性能优化**
   - 大文件上传性能优化
   - 大量文件列表渲染优化
   - 图片缩略图加载优化

3. **跨平台适配**
   - Windows 系统托盘图标适配
   - macOS 菜单栏集成
   - Linux 桌面通知适配

### 待调研功能

1. **P2P 直传功能**
   - 局域网内设备间文件直传
   - 减少服务器流量

2. **OCR 文字识别**
   - 图片文字提取
   - 截图文字识别

3. **批量编辑**
   - 批量添加水印
   - 批量压缩
   - 批量格式转换

---

## 📝 开发规范

### 代码规范

- 遵循 ESLint + Prettier 配置
- TypeScript 严格模式
- 组件命名：PascalCase
- 文件命名：kebab-case
- 提交信息：遵循 Conventional Commits

### 目录结构

```
PixelPunk-Desktop/
├── src/                      # 前端源码
│   ├── api/                  # API 接口（复用 Web 端）
│   ├── assets/               # 静态资源
│   ├── components/           # 组件
│   │   ├── common/           # 通用组件
│   │   ├── file/             # 文件相关组件
│   │   ├── ai/               # AI 相关组件
│   │   └── desktop/          # 桌面特有组件
│   ├── composables/          # 组合式函数
│   ├── layouts/              # 布局组件
│   ├── pages/                # 页面
│   ├── router/               # 路由配置
│   ├── store/                # Pinia Store
│   ├── styles/               # 样式文件
│   ├── types/                # TypeScript 类型（复用 Web 端）
│   ├── utils/                # 工具函数（复用 Web 端）
│   ├── App.vue               # 根组件
│   └── main.ts               # 入口文件
│
├── src-tauri/                # Tauri Rust 后端
│   ├── src/                  # Rust 源码
│   ├── icons/                # 应用图标
│   ├── Cargo.toml            # Rust 依赖
│   └── tauri.conf.json       # Tauri 配置
│
├── docs/                     # 文档
├── scripts/                  # 构建脚本
├── package.json              # 依赖配置
└── README.md                 # 项目说明
```

### Git 工作流

- `main` - 主分支（稳定版本）
- `develop` - 开发分支
- `feature/*` - 功能分支
- `bugfix/*` - Bug 修复分支
- `release/*` - 发布分支

---

## 🎯 成功指标

### 功能指标

- [ ] 所有核心功能 100% 实现
- [ ] AI 功能准确率 > 85%
- [ ] 支持 Windows 和 macOS 平台

### 性能指标

- [ ] 应用启动时间 < 3 秒
- [ ] 文件列表渲染 1000 项 < 1 秒
- [ ] 单文件上传速度接近带宽上限
- [ ] 内存占用 < 200MB（闲置状态）

### 用户体验指标

- [ ] 界面响应时间 < 100ms
- [ ] 崩溃率 < 0.1%
- [ ] 用户满意度 > 90%

---

## 🔗 相关资源

### 官方文档

- [Tauri 官方文档](https://tauri.app/v2/guides/)
- [Vue 3 官方文档](https://vuejs.org/)
- [Pinia 官方文档](https://pinia.vuejs.org/)

### 项目仓库

- **后端仓库**: `/Users/lilithgames/Desktop/saiboPic/cyber`
- **Web 前端**: `/Users/lilithgames/Desktop/saiboPic/cyber/web`
- **桌面端**: `/Users/lilithgames/Desktop/core-project/PixelPunk-Desktop`

### 后端 API

- **API Base URL**: `http://localhost:9520/api/v1`
- **API 文档**: 参考后端 `internal/routes/` 目录

---

## ✅ 下一步行动

1. **确认 UI 组件库选择**
   - 建议：Element Plus（组件完善）或 Naive UI（轻量级）

2. **解决 Tauri 插件版本问题**
   - 检查并修复 `src-tauri/Cargo.toml`

3. **从 Web 端复用代码**
   - 复制 API 接口定义
   - 复制类型定义
   - 复制工具函数

4. **开始 Phase 1 开发**
   - 配置 UI 组件库
   - 开发主窗口布局
   - 实现用户认证

---

**文档版本**: v1.0
**创建日期**: 2025-10-02
**最后更新**: 2025-10-02
**作者**: Claude Code Assistant
**状态**: 待评审
