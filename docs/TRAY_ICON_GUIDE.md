# macOS 托盘图标设计指南

## 问题说明

如果你的 macOS 托盘图标显示为纯色方块，是因为 **macOS 托盘图标有特殊要求**。

## macOS 托盘图标要求

### 必须满足的条件

1. **黑白图标**（Template Image）
   - 只能使用黑色、白色和透明
   - 不能使用彩色

2. **颜色规则**
   - ⚫️ **黑色/深灰色** → 系统会忽略
   - ⚪️ **白色** → 会显示为前景色（自动适应系统主题）
   - 🔲 **透明** → 保持透明

3. **尺寸**
   - 推荐：32×32 px
   - 支持 @2x（64×64 px）用于高清屏

4. **设计建议**
   - 使用简洁的线条图标
   - 避免过于复杂的细节
   - 留出适当的内边距（padding）

## 快速修复

### 方案 1：自动转换（快速但可能效果不佳）

运行脚本自动将彩色 logo 转换为黑白托盘图标：

```bash
npm run generate-tray-icon
```

然后重新启动应用：

```bash
npm run tauri:dev
```

**注意**：自动转换可能效果不理想，建议使用方案 2。

### 方案 2：手动设计（推荐，效果最佳）

#### 1. 设计要求

创建一个 32×32 px 的 PNG 图标，要求：

- ✅ 背景完全透明
- ✅ 图标内容为白色（RGB: 255, 255, 255）
- ✅ 简洁的线条设计
- ✅ 线条粗细建议 2-3px

#### 2. 设计工具

推荐使用以下工具：

- **Figma**（在线/免费）
- **Sketch**（macOS）
- **Photoshop**
- **GIMP**（免费）
- **SF Symbols**（macOS 系统图标，可参考）

#### 3. 设计示例

```
┌──────────────────────┐
│  ░░░░░░░░░░░░░░░░░░  │  透明背景
│  ░░  ▓▓▓▓▓▓▓▓  ░░  │
│  ░░  ▓      ▓  ░░  │  白色线条
│  ░░  ▓  □□  ▓  ░░  │  (RGB: 255,255,255)
│  ░░  ▓      ▓  ░░  │
│  ░░  ▓▓▓▓▓▓▓▓  ░░  │
│  ░░░░░░░░░░░░░░░░░░  │
└──────────────────────┘
```

#### 4. 导出设置

**Photoshop/GIMP**:

- 格式：PNG-24
- 透明背景：✅ 启用
- 颜色配置：sRGB

**Figma/Sketch**:

- 导出为 PNG
- 尺寸：32×32 px（或 64×64 px 命名为 32x32@2x.png）
- 背景：透明

#### 5. 保存位置

将设计好的图标保存为：

```
src-tauri/icons/32x32.png
```

#### 6. 测试

```bash
npm run tauri:dev
```

## 参考资源

### Apple 官方指南

- [Human Interface Guidelines - Menu Bar Extras](https://developer.apple.com/design/human-interface-guidelines/menu-bar-extras)
- 关键要点：
  - 使用单色符号
  - 支持浅色和深色模式
  - 图标应简洁易识别

### 优秀示例

你可以参考这些应用的托盘图标设计：

- **Dropbox** - 简洁的云朵图标
- **Spotify** - 简化的音符图标
- **Slack** - 简化的井号图标
- **VS Code** - 简化的尖括号图标

### SF Symbols（macOS 系统图标）

打开 macOS 的 **SF Symbols** 应用（免费下载），查看系统推荐的图标设计：

```bash
# 下载地址
https://developer.apple.com/sf-symbols/
```

## 常见问题

### Q: 为什么我的彩色图标显示为方块？

A: macOS 托盘不支持彩色图标。托盘图标必须是黑白模板图标，系统会根据主题自动调整颜色。

### Q: 我的图标在深色模式下看不见怎么办？

A: 确保图标内容是**白色**（不是黑色）。白色区域会被系统渲染为前景色，自动适应浅色/深色主题。

### Q: 图标太小看不清怎么办？

A:

1. 简化图标设计，去掉不必要的细节
2. 增加线条粗细（建议 2-3px）
3. 提供 @2x 版本（64×64 px）用于高清屏

### Q: 可以使用渐变吗？

A: 不建议。macOS 托盘图标最好是纯白色 + 透明背景，避免使用灰度或渐变。

### Q: 如何快速制作一个临时图标？

A: 可以用在线工具：

1. **Photopea**（免费在线 Photoshop）
   - 网址：https://www.photopea.com
   - 创建 32×32 px 透明画布
   - 用白色画简单形状
   - 导出为 PNG

2. **Canva**
   - 创建自定义尺寸（32×32）
   - 使用白色图形元素
   - 下载为 PNG（透明背景）

## 验证图标

运行以下命令检查图标格式：

```bash
# 检查图标信息
file src-tauri/icons/32x32.png

# 查看图标详细信息
identify -verbose src-tauri/icons/32x32.png | head -20
```

正确的输出应该包含：

- `PNG image data`
- `RGBA` 或 `8-bit/color RGBA`
- 尺寸：32×32

## 更多帮助

如果还有问题，请查看：

- [README.md](./README.md) - 完整文档
- [ICON_GUIDE.md](./ICON_GUIDE.md) - 应用图标指南

---

**提示**：托盘图标设计是一门艺术，多尝试几个版本，找到最清晰易识别的设计！
